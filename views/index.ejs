<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <style>
          .columns {
            column-count: 3;
            column-gap: 16px;
            list-style: none;
            margin: 0;
            padding: 0;
          }
          button {
            width: 100%;
            height: 100px;
            font-size: 16px;
          }
        </style>
        <script>
          function EncodeHTMLForm( data ) {
            var params = [];

            for( var name in data )
            {
              var value = data[ name ];
              var param = encodeURIComponent( name ) + '=' + encodeURIComponent( value );

              params.push( param );
            }

            return params.join( '&' ).replace( /%20/g, '+' );
          }
          function post(id) {
            let request = new XMLHttpRequest();
            request.onreadystatechange = function() {
              if (this.readyState === 4 && this.status !== 200) {
                alert("failed");
              }
            }
            request.open("POST", "/event");
            request.setRequestHeader( 'Content-Type', 'application/x-www-form-urlencoded' );
            request.send(EncodeHTMLForm({id:id}));
          }
        </script>
    </head>
    <body>
      <ul class="columns">
        <% for (let id in modules) { %>
          <% if (modules[id].type == "button") { %>
            <li>
              <button onclick="post('<%- id %>');"><%- modules[id].title %></button>
            </li>
          <% } %>
        <% } %>
      </ul>
    </body>
</html>
